{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Docker",
      "type": "npm",
      "script": "docker:dev",
      "problemMatcher": []
    },
    {
      "label": "DB Connection",
      "type": "shell",
      "command": "timeout 60 bash -c 'until PGPASSWORD=admin psql -h localhost -U admin -t -c \"SELECT 1\" > /dev/null 2>&1; do sleep 1; echo -n \".\"; done'",
      "presentation": {
        "echo": true,
        "reveal": "never",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "close": true,
        "group": "test"
      }
    },
    {
      "label": "Start",
      "dependsOn": ["Docker", "Server", "Client", "Generator-runner"],
      "problemMatcher": []
    },
    {
      "label": "Server",
      "type": "shell",
      "command": "fkill :3000 -f -s; nx serve amplication-server",
      "detail": "Inspect:9229",
      "dependsOn": ["DB Connection"],
      "problemMatcher": ["$webpack-builder"]
    },
    {
      "label": "Client",
      "type": "shell",
      "command": "nx serve amplication-client",
      "problemMatcher": ["$webpack-builder"]
    },
    {
      "label": "Generator-runner",
      "type": "shell",
      "command": "fkill :3002 -f -s; nx serve amplication-data-service-generator-runner",
      "detail": "Inspect:9429",
      "problemMatcher": ["$webpack-builder"],
      "dependsOn": ["DB Connection"]
    }
  ]
}
