{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Docker",
      "type": "npm",
      "script": "docker:dev",
      "problemMatcher": []
    },
    {
      "label": "DB Connection",
      "type": "shell",
      "command": "timeout 180 bash -c 'until PGPASSWORD=admin psql -h localhost -p 55432 -U admin -t -c \"SELECT 1\" > /dev/null 2>&1; do sleep 1; echo -n \".\"; done'",
      "presentation": {
        "echo": true,
        "reveal": "never",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "close": true,
        "group": "test"
      }
    },
    {
      "label": "Start",
      "dependsOn": [
        "Docker",
        "Server",
        "Client",
        "Generator-runner",
        "Plugin-api"
      ],
      "problemMatcher": []
    },
    {
      "label": "Server",
      "type": "shell",
      "command": "fkill :53000 -f -s; npm run serve",
      "options": {
        "cwd": "${workspaceRoot}/packages/amplication-server"
      },
      "detail": "Inspect:9229",
      "dependsOn": ["DB Connection"],
      "problemMatcher": ["$webpack-builder"]
    },
    {
      "label": "Client",
      "type": "shell",
      "command": "nx serve amplication-client",
      "problemMatcher": ["$webpack-builder"]
    },
    {
      "label": "Generator-runner",
      "type": "shell",
      "command": "fkill :53002 -f -s; npm run serve",
      "options": {
        "cwd": "${workspaceRoot}/packages/amplication-data-service-generator-runner"
      },
      "problemMatcher": ["$webpack-builder"],
      "dependsOn": ["DB Connection"]
    },
    {
      "label": "Plugin-api",
      "type": "shell",
      "command": "fkill :53003 -f -s; npm run serve",
      "options": {
        "cwd": "${workspaceRoot}/packages/amplication-plugin-api"
      },
      "problemMatcher": ["$webpack-builder"],
      "dependsOn": ["DB Connection"]
    }
  ]
}
